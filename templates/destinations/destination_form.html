{% extends "base.html" %}

{% block hero %}{% endblock %}

{% block content %}
<div class="card shadow-sm p-4 mt-4">
  <h2 class="fw-bold mb-4 text-primary">
    {% if destination %}‚úèÔ∏è Edit{% else %}‚ûï Add{% endif %} Destination
  </h2>

  <form method="post" class="form">
    {% csrf_token %}

    <!-- Destination Name -->
    <div class="mb-3">
      <label for="id_name" class="form-label fw-semibold">Destination Name</label>
      {{ form.name }}
      {% if form.name.errors %}
        <div class="text-danger small">{{ form.name.errors }}</div>
      {% endif %}
    </div>

    <!-- Location Dropdown -->
    <div class="mb-3">
      <label for="id_location" class="form-label fw-semibold">Country / Location</label>
      {{ form.location }}
      {% if form.location.errors %}
        <div class="text-danger small">{{ form.location.errors }}</div>
      {% endif %}
    </div>

    <!-- Status Dropdown -->
    <div class="mb-3">
      <label for="id_status" class="form-label fw-semibold">Trip Status</label>
      {{ form.status }}
      {% if form.status.errors %}
        <div class="text-danger small">{{ form.status.errors }}</div>
      {% endif %}
    </div>

    <!-- Submit Buttons -->
    <div class="mt-4 d-flex justify-content-start gap-2">
      <button type="submit" class="btn btn-primary px-4">üíæ Save</button>
      <a href="{% url 'destination_list' %}" class="btn btn-outline-secondary px-4">‚¨ÖÔ∏è Cancel</a>
    </div>
  </form>
</div>

<!-- JS Enhancement -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  const locationSelect = document.getElementById("id_location");
  const nameInput = document.getElementById("id_name");

  // Automatically fill destination name with country if name is blank
  if (locationSelect && nameInput) {
    locationSelect.addEventListener("change", function() {
      const selectedText = locationSelect.options[locationSelect.selectedIndex].text;
      if (nameInput.value.trim() === "") {
        nameInput.value = selectedText;
      }
    });
  }
});
</script>
{% endblock %}
